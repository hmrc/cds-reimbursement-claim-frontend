@*
 * Copyright 2021 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import play.twirl.api.Html
@import play.api.mvc.Request
@import play.api.i18n.Messages
@import uk.gov.hmrc.cdsreimbursementclaimfrontend.config.ViewConfig

@import uk.gov.hmrc.hmrcfrontend.views.html.helpers.HmrcLayout
@import uk.gov.hmrc.hmrcfrontend.views.config.StandardAlphaBanner
@import views.html.helper.CSPNonce

@this(
    hmrcLayout: HmrcLayout,
    StandardAlphaBanner: StandardAlphaBanner
)

@(
    pageTitle: Option[String] = None,
    scriptsBlock: Option[Html] = None,
    hasErrors: Boolean = false
)(contentBlock: Html)(implicit request: Request[_], messages: Messages, viewConfig: ViewConfig)



    @scripts = {
        @scriptsBlock
        <script src='@_root_.controllers.routes.Assets.versioned("lib/govuk-frontend/govuk/all.js")'></script>
        <script src='@_root_.controllers.routes.Assets.versioned("lib/hmrc-frontend/hmrc/all.js")'></script>
        <script src='@_root_.controllers.routes.Assets.versioned("javascripts/location-autocomplete.min.js")'></script>
        <script src='@_root_.controllers.routes.Assets.versioned("javascripts/application.js")'></script>
    }

                                                @userBanner = {

                                                    @signedInUserDetails.map{ user =>
                                                        <div class="cds-user-banner">
                                                            <div>
                                                                <p class="govuk-body-s govuk-!-margin-top-2 govuk-!-margin-bottom-2">
                                                                    <strong class="govuk-!-margin-right-1 cds-wrap-content--forced">
                                                                        EORI @user.eori.value:</strong> @user.contactName.value
                                                                </p>
                                                            </div>
                                                        </div>
                                                    }
                                                    <div class="cds-user-banner cds-no-border">
                                                        @if(!suppressBackLink) {
                                                            <div id="cdsr-back-link"></div>
                                                        }
                                                        <div>
                                                            @if(viewConfig.enableLanguageSwitching) {@languageSelect()}
                                                        </div>
                                                    </div>

                                                }

                                                @beforeContentBlock = {
                                                    @phaseBanner
                                                    @userBanner
                                                }

    @hmrcLayout(
        pageTitle = Some(viewConfig.pageTitleWithServiceName(pageTitle.getOrElse(""), messages("service.title"), hasErrors)),
        isWelshTranslationAvailable = false,
        serviceUrl = Some(messages("service.homePageUrl")),
        signOutUrl = Some(viewConfig.ggSignOut),
        accessibilityStatementUrl = ,
        phaseBanner = Some(StandardAlphaBanner(url = viewConfig.serviceFeedBackUrl)),
        nonce = CSPNonce.get,
        additionalScriptsBlock = Some(scripts)
    )(contentBlock)
